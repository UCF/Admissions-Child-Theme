!function(e){var n=".js-anchor-link";function i(){return e(n).filter(".active")}function r(){var t=i();t.length&&t.removeClass("active")}function o(t){e(n).filter('[href="'+t+'"]').addClass("active")}e.fn.isInViewport=function(){var t=e(this).offset().top,n=t+e(this).outerHeight(),i=e(window).scrollTop(),r=i+e(window).height();return i<n&&t<r},e.fn.anchorLink=function(){return this.each(function(t,n){var i=e(n);i.on("click",function(t){var n=i.attr("href");"#"===n.substring(0,1)&&(t.preventDefault(),r(),o(n),function(t){var n=e(t);n.length&&(e("html, body").animate({scrollTop:n.offset().top+1},750),history.pushState?history.pushState(null,null,t):location.hash=t)}(n))})}),this},e(document).ready(function(){e(n).anchorLink(),e(".map-marker").tooltip({title:function(){return e(this).find(".js-marker-tooltip-text").text()}})}),e(window).on("scroll resize",function(){if(992<=e(window).width()){var t=e(".js-anchor").filter(function(){return e(this).isInViewport()});if(t.length){var n=t.first();n!==function(){var t=i();return t.length?e(t.first().attr("href")):null}()&&(r(),o("#"+n.attr("id")))}else r()}})}(jQuery);