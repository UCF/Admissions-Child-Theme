!function(r){var n=".js-anchor-link",t="mobile-sidebar-active",i=r("#js-page-campus-tour"),e=r("#js-sidebar"),o=r("#js-sidebar-menu"),s=r("#js-sidebar-toggle-btn"),a=r("#js-sidebar-close-btn"),c=992;function l(){return r(n).filter(".active")}function u(){var t=l();t.length&&t.removeClass("active")}function f(t){r(n).filter('[href="'+t+'"]').addClass("active")}function h(){return i.hasClass(t)&&r(window).width()<c}function d(){i.removeClass(t)}function v(){i.toggleClass(t)}r.fn.isInViewport=function(){var t=r(this).offset().top,n=t+r(this).outerHeight(),i=r(window).scrollTop(),e=i+r(window).height();return i<n&&t<e},r.fn.anchorLink=function(){return this.each(function(t,n){var i=r(n);i.on("click",function(t){var n=i.attr("href");"#"===n.substring(0,1)&&(t.preventDefault(),u(),f(n),function(t){var n=r(t);if(n.length){var i=n.offset().top+1;h()&&"#content"!==t&&(i-=o.outerHeight()),r("html, body").animate({scrollTop:i},750),history.pushState?history.pushState(null,null,t):location.hash=t}}(n),h()&&d())})}),this},r(document).ready(function(){r(n).anchorLink(),r(".map-marker").tooltip({title:function(){return r(this).find(".js-marker-tooltip-text").text()}}),a.on("click",d),s.on("click",v)}),r(document).on("click",function(t){var n=r(t.target);!h()||n.closest(e).length||n.closest(s).length||d()}),r(window).on("scroll resize",function(){if(r(window).width()>=c){var t=r(".js-anchor").filter(function(){return r(this).isInViewport()});if(t.length){var n=t.first();n!==function(){var t=l();return t.length?r(t.first().attr("href")):null}()&&(u(),f("#"+n.attr("id")))}else u()}})}(jQuery);